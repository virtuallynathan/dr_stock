{% extends "base.html" %}

{% block pageheaders %}
<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.1/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.1/angular-route.min.js"></script>
<script src="/static/js/StockController.js"></script>

<style type="text/css">
.axis path,
.axis line {
  fill: none;
  stroke: #54b6e5;
  stroke-width: 2px;
  shape-rendering: crispEdges;
}

.grid path,
.grid line {
  fill: none;
  stroke: #54b6e5;
  stroke-width: 2px;
  shape-rendering: crispEdges;
}

.domain {
  stroke-width: 2px;
}

.axis text {
  fill: #fff;
}

.line {
  fill: none;
  stroke: #fff;
  stroke-width: 3px;
}

.area {
  fill: #fff;
  opacity: 0.4;
}

rect.pane {
  cursor: move;
  fill: none;
  pointer-events: all;
}
</style>
<script type="text/javascript">

function toggleStockPage(sender) {

  var parent_row = sender;

  if (parent_row.className.match(/\bacc_open\b/)) {

    parent_row.className = parent_row.className.replace('acc_open','');
    $(parent_row.nextSibling).animate({height: '0px'}, {complete: function(){ parent_row.parentNode.removeChild(parent_row.nextSibling); }});

  } else {
    var new_row = document.createElement('tr');

    var ticker = parent_row.firstElementChild.firstElementChild.innerHTML;
    new_row.innerHTML = "<td style=\"background-color: #36a9e1; color: #FFFFFF; height: 0px;\" colspan=\"5\">" +
    "<div>" +
    "<stock-chart exchange=\""+$('#exc-name').html()+"\" ticker=\""+ticker+"\"/>"
    "</div>" +
    "</td>";


    parent_row.parentNode.insertBefore(new_row, parent_row.nextSibling);
    $(new_row).animate({height: '256px'});
    parent_row.className += ' acc_open';
  }

}

function switchHist() {
  $('#comp-btn').removeClass('btn-primary');
  $('#hist-btn').addClass('btn-primary');

  $('#comp-pane').css('display', 'none');
  $('#hist-pane').css('display', 'block');
}

function switchComp() {
  $('#hist-btn').removeClass('btn-primary');
  $('#comp-btn').addClass('btn-primary');

  $('#hist-pane').css('display', 'none');
  $('#comp-pane').css('display', 'block');
}

</script>


{% endblock %}

{% block pagename %}
Stock page
{% endblock %}


{% block content %}
<div ng-app="StockApp">
<div style="margin: auto; max-width: 1024px; height: 100%;" ng-view>

</div>
</div>
{% endblock %}
